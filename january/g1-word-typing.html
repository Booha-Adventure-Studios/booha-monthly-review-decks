<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Booha Review Decks ‚Äì Word Typing</title>
<meta name="theme-color" content="#0b1020" />
<link rel="icon" type="image/png" href="booha-ghost.png">
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&family=Noto+Sans+JP:wght@500;700;900&display=swap" rel="stylesheet" />

<style>
:root{
  --bg:#0b1020;
  --ink:#ffffff;
  --good:#22c55e;
  --bad:#ef4444;
  --gold:#ffd166;
  --outline:rgba(255,255,255,.12);
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}

body{
  background:
    radial-gradient(circle at 20% 15%, rgba(255,209,102,.22), transparent 55%),
    radial-gradient(circle at 80% 85%, rgba(94,230,255,.18), transparent 55%),
    var(--bg);
  color:var(--ink);
  font-family:'Cinzel',serif;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:16px;
}

/* ‚úÖ Top-left Back button */
.backTop{
  position:fixed;
  top:14px;
  left:14px;
  z-index:1000;
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding:10px 14px;
  border-radius:14px;
  text-decoration:none;
  background:rgba(0,0,0,.45);
  border:1px solid rgba(255,255,255,.22);
  color:#fff;
  font-family:'Cinzel',serif;
  font-weight:900;
  backdrop-filter: blur(4px);
  -webkit-tap-highlight-color: transparent;
}
.backTop span{
  font-family:'Noto Sans JP',system-ui;
  font-weight:900;
  color:#d7d7d7;
}

/* Card */
.card{
  width:min(760px,94vw);
  background:rgba(0,0,0,.35);
  border-radius:26px;
  padding:26px 22px 20px;
  text-align:center;
  box-shadow:0 20px 60px rgba(0,0,0,.5);
  border:1px solid var(--outline);
  position:relative;
}

/* Perfect run gold frame */
.card.perfect{
  border:2px solid rgba(255,209,102,.65);
  box-shadow:
    0 0 18px rgba(255,209,102,.28),
    0 0 46px rgba(255,209,102,.20),
    0 22px 70px rgba(0,0,0,.55);
}
.card.perfect::after{
  content:"";
  position:absolute;
  inset:-10px;
  border-radius:32px;
  pointer-events:none;
  background:conic-gradient(from 0deg,
    rgba(255,255,255,0) 0%,
    rgba(255,241,179,.75) 12%,
    rgba(255,255,255,0) 24%,
    rgba(255,209,102,.80) 38%,
    rgba(255,255,255,0) 52%,
    rgba(255,241,179,.70) 68%,
    rgba(255,255,255,0) 82%,
    rgba(255,209,102,.80) 94%,
    rgba(255,255,255,0) 100%
  );
  opacity:.55;
  filter:blur(0.6px);
  animation:goldSpin 3.6s linear infinite;
  mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  padding:10px;
}
@keyframes goldSpin{to{transform:rotate(360deg)}}

/* Header */
.header{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:6px;
}
h1{
  font-size:clamp(26px,4.6vw,44px);
  font-weight:900;
  letter-spacing:.05em;
  line-height:1.05;
}
h1 small{
  display:block;
  margin-top:6px;
  font-family:'Noto Sans JP',system-ui;
  font-size:clamp(15px,2.6vw,22px);
  font-weight:900;
  color:#d7d7d7;
  letter-spacing:.02em;
}
.counter{
  margin-top:10px;
  font-size:14px;
  color:#cbd5e1;
}

/* Prompt */
.jp{
  margin-top:22px;
  font-family:'Noto Sans JP',system-ui;
  font-size:clamp(28px,5.2vw,40px);
  font-weight:900;
  letter-spacing:.02em;
}
.hira{
  margin-top:6px;
  font-family:'Noto Sans JP',system-ui;
  font-size:clamp(14px,2.6vw,18px);
  color:#cbd5e1;
}

/* Input + button */
input{
  margin-top:18px;
  width:100%;
  font-size:22px;
  padding:14px 16px;
  border-radius:16px;
  border:none;
  outline:none;
  text-align:center;
}
button{
  margin-top:14px;
  width:100%;
  padding:14px;
  font-size:20px;
  border-radius:16px;
  border:none;
  font-weight:900;
  cursor:pointer;
  background:linear-gradient(145deg,var(--gold),#fff1b3);
}

.feedback{
  margin-top:14px;
  min-height:52px;
  display:flex;
  align-items:center;
  justify-content:center;
}

.heart{
  font-size:46px;
  color:var(--good);
  animation:pop .6s ease;
}
@keyframes pop{
  0%{transform:scale(.6);opacity:0}
  60%{transform:scale(1.2)}
  100%{transform:scale(1)}
}
.fart{
  font-size:44px;
  color:var(--bad);
  animation:shake .4s ease;
}
@keyframes shake{
  0%{transform:translateX(0)}
  25%{transform:translateX(-7px)}
  50%{transform:translateX(7px)}
  75%{transform:translateX(-5px)}
  100%{transform:translateX(0)}
}

.hint{
  margin-top:6px;
  font-size:14px;
  color:#ffd166;
  min-height:18px;
}

/* Result */
#result{display:none}
.score{
  margin-top:18px;
  font-size:44px;
  font-weight:900;
}
.good{color:#22c55e}
.mid{color:#ffd166}
.bad{color:#ef4444}

/* Perfect text */
.perfectTag{
  margin-top:12px;
  font-family:'Cinzel',serif;
  font-weight:900;
  letter-spacing:.08em;
  color:#ffd166;
  text-shadow:0 0 10px rgba(255,209,102,.35), 0 0 22px rgba(255,209,102,.22);
  font-size:clamp(16px,2.6vw,20px);
}
.perfectTag small{
  display:block;
  margin-top:6px;
  font-family:'Noto Sans JP',system-ui;
  letter-spacing:.02em;
  color:#ffe7b5;
  font-weight:900;
}

/* Footer bigger in Booha font */
footer{
  width:100%;
  margin-top:14px;
  text-align:center;
  font-family:'Cinzel',serif;
  font-weight:900;
  color:#cbd5e1;
  font-size:18px;
  letter-spacing:.06em;
}

.bottom{
  margin-top:18px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  justify-content:center;
  align-items:center;
}
a.back{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  padding:10px 14px;
  border-radius:14px;
  text-decoration:none;
  background:rgba(255,255,255,.10);
  border:1px solid rgba(255,255,255,.18);
  color:#fff;
  font-family:'Cinzel',serif;
  font-weight:900;
  -webkit-tap-highlight-color: transparent;
}
a.back span{
  font-family:'Noto Sans JP',system-ui;
  font-weight:900;
  color:#d7d7d7;
}

@media (max-width: 520px){
  input{font-size:20px}
  button{font-size:19px}
  .backTop{top:10px;left:10px;padding:9px 12px}
}
</style>
</head>
<body>

<!-- ‚úÖ Top-left main menu -->
<a class="backTop" href="index.html">Back to Menu <span>„É°„Éã„É•„Éº„Å∏</span></a>

<div class="card" id="card">
  <div id="game">
    <div class="header">
      <h1>Word Typing<small>„Çø„Ç§„Éî„É≥„Ç∞</small></h1>
      <div class="counter" id="counter">1 / 60</div>
    </div>

    <div class="jp" id="jp"></div>
    <div class="hira" id="hira"></div>

    <input id="answer" autocomplete="off" autocapitalize="none" spellcheck="false" />
    <button id="submit">OK</button>

    <div class="feedback" id="feedback"></div>
    <div class="hint" id="hint"></div>

    <footer>Bryan's English School</footer>
  </div>

  <div id="result">
    <div class="header">
      <h1>RESULT<small>„Åë„Å£„Åã</small></h1>
    </div>

    <div class="score" id="score"></div>
    <div class="perfectTag" id="perfectTag" style="display:none;">
      PERFECT RUN
      <small>„Éë„Éº„Éï„Çß„ÇØ„ÉàÔºÅ</small>
    </div>

    <div class="bottom">
      <a class="back" href="index.html">Back to Menu <span>„É°„Éã„É•„Éº„Å∏</span></a>
      <a class="back" href="" id="retryLink">Try Again <span>„ÇÇ„ÅÜ‰∏ÄÂõû</span></a>
    </div>

    <footer>Bryan's English School</footer>
  </div>
</div>

<!-- ‚úÖ SFX are in the SAME folder as this HTML -->
<audio id="ding" src="ding.mp3" preload="auto"></audio>
<audio id="fart" src="fart.mp3" preload="auto"></audio>

<script>
function $(q){ return document.querySelector(q); }

const ding = $('#ding');
const fart = $('#fart');

const DATA = [
  // Mind / attitude
  {en:'mind', jp:'ÂøÉ', hi:'„Åì„Åì„Çç'},
  {en:'heart', jp:'ÂøÉ', hi:'„Åì„Åì„Çç'},
  {en:'focus', jp:'ÈõÜ‰∏≠', hi:'„Åó„ÇÖ„ÅÜ„Å°„ÇÖ„ÅÜ'},
  {en:'relax', jp:'„É™„É©„ÉÉ„ÇØ„Çπ„Åô„Çã', hi:'„Çä„Çâ„Å£„Åè„Åô „Åô„Çã'},
  {en:'mistake', jp:'ÈñìÈÅï„ÅÑ', hi:'„Åæ„Å°„Åå„ÅÑ'},
  {en:'improve', jp:'‰∏äÈÅî„Åô„Çã', hi:'„Åò„Çá„ÅÜ„Åü„Å§ „Åô„Çã'},
  {en:'believe', jp:'‰ø°„Åò„Çã', hi:'„Åó„Çì„Åò„Çã'},
  {en:'effort', jp:'Âä™Âäõ', hi:'„Å©„Çä„Çá„Åè'},
  {en:'attitude', jp:'ÊÖãÂ∫¶', hi:'„Åü„ÅÑ„Å©'},
  {en:'courage', jp:'ÂãáÊ∞ó', hi:'„ÇÜ„ÅÜ„Åç'},
  {en:'happy', jp:'Âπ∏„Åõ', hi:'„Åó„ÅÇ„Çè„Åõ'},

  // Body / health
  {en:'body', jp:'‰Ωì', hi:'„Åã„Çâ„Å†'},
  {en:'head', jp:'È†≠', hi:'„ÅÇ„Åü„Åæ'},
  {en:'stomach', jp:'„ÅäËÖπ', hi:'„Åä„Å™„Åã'},
  {en:'sleep', jp:'ÂØù„Çã', hi:'„Å≠„Çã'},
  {en:'food', jp:'È£ü„ÅπÁâ©', hi:'„Åü„Åπ„ÇÇ„ÅÆ'},
  {en:'fruit', jp:'ÊûúÁâ©', hi:'„Åè„Å†„ÇÇ„ÅÆ'},
  {en:'vegetable', jp:'ÈáéËèú', hi:'„ÇÑ„Åï„ÅÑ'},
  {en:'exercise', jp:'ÈÅãÂãï', hi:'„ÅÜ„Çì„Å©„ÅÜ'},
  {en:'walk', jp:'Ê≠©„Åè', hi:'„ÅÇ„Çã„Åè'},
  {en:'run', jp:'Ëµ∞„Çã', hi:'„ÅØ„Åó„Çã'},
  {en:'drink', jp:'È£≤„ÇÄ', hi:'„ÅÆ„ÇÄ'},
  {en:'water', jp:'Ê∞¥', hi:'„Åø„Åö'},
  {en:'strong', jp:'Âº∑„ÅÑ', hi:'„Å§„Çà„ÅÑ'},
  {en:'tired', jp:'Áñ≤„Çå„Åü', hi:'„Å§„Åã„Çå„Åü'},
  {en:'healthy', jp:'ÂÅ•Â∫∑', hi:'„Åë„Çì„Åì„ÅÜ'},

  // Daily routine
  {en:'morning', jp:'Êúù', hi:'„ÅÇ„Åï'},
  {en:'night', jp:'Â§ú', hi:'„Çà„Çã'},
  {en:'breakfast', jp:'Êúù„Åî„ÅØ„Çì', hi:'„ÅÇ„Åï„Åî„ÅØ„Çì'},
  {en:'lunch', jp:'Êòº„Åî„ÅØ„Çì', hi:'„Å≤„Çã„Åî„ÅØ„Çì'},
  {en:'dinner', jp:'Â§ïÈ£ü', hi:'„ÇÜ„ÅÜ„Åó„Çá„Åè'},
  {en:'brush', jp:'Ê≠Ø„Çí„Åø„Åå„Åè', hi:'„ÅØ „Çí „Åø„Åå„Åè'},
  {en:'wash', jp:'Ê¥ó„ÅÜ', hi:'„ÅÇ„Çâ„ÅÜ'},
  {en:'go', jp:'Ë°å„Åè', hi:'„ÅÑ„Åè'},
  {en:'come', jp:'Êù•„Çã', hi:'„Åè„Çã'},
  {en:'study', jp:'ÂãâÂº∑', hi:'„Åπ„Çì„Åç„Çá„ÅÜ'},
  {en:'homework', jp:'ÂÆøÈ°å', hi:'„Åó„ÇÖ„Åè„Å†„ÅÑ'},
  {en:'clean', jp:'ÊéÉÈô§„Åô„Çã', hi:'„Åù„ÅÜ„Åò „Åô„Çã'},
  {en:'start', jp:'Âßã„ÇÅ„Çã', hi:'„ÅØ„Åò„ÇÅ„Çã'},
  {en:'finish', jp:'ÁµÇ„Çè„Çã', hi:'„Åä„Çè„Çã'},

  // Goals / future
  {en:'goal', jp:'ÁõÆÊ®ô', hi:'„ÇÇ„Åè„Å≤„Çá„ÅÜ'},
  {en:'plan', jp:'Ë®àÁîª', hi:'„Åë„ÅÑ„Åã„Åè'},
  {en:'future', jp:'Êú™Êù•', hi:'„Åø„Çâ„ÅÑ'},
  {en:'dream', jp:'Â§¢', hi:'„ÇÜ„ÇÅ'},
  {en:'challenge', jp:'ÊåëÊà¶', hi:'„Å°„Çá„ÅÜ„Åõ„Çì'},
  {en:'change', jp:'Â§â„Åà„Çã', hi:'„Åã„Åà„Çã'},
  {en:'habit', jp:'ÁøíÊÖ£', hi:'„Åó„ÇÖ„ÅÜ„Åã„Çì'},
  {en:'practice', jp:'Á∑¥Áøí', hi:'„Çå„Çì„Åó„ÇÖ„ÅÜ'},
  {en:'motivation', jp:'„ÇÑ„ÇãÊ∞ó', hi:'„ÇÑ„Çã„Åç'}
];

// shuffle each refresh
for(let k=DATA.length-1;k>0;k--){
  const j=Math.floor(Math.random()*(k+1));
  [DATA[k],DATA[j]]=[DATA[j],DATA[k]];
}

let idx=0, score=0, mistakes=0;
let anyWrongEver = false; // ‚úÖ perfect run check

const jpEl=$('#jp');
const hiraEl=$('#hira');
const ansEl=$('#answer');
const fbEl=$('#feedback');
const hintEl=$('#hint');
const counterEl=$('#counter');
const submitBtn=$('#submit');
const cardEl=$('#card');

function safePlay(aud){
  if(!aud) return;
  try{ aud.pause(); aud.currentTime=0; }catch(e){}
  try{ aud.play().catch(()=>{}); }catch(e){}
}

function load(){
  const d=DATA[idx];
  jpEl.textContent=d.jp;
  hiraEl.textContent=d.hi;
  ansEl.value='';
  fbEl.textContent='';
  hintEl.textContent='';
  mistakes=0;
  counterEl.textContent=(idx+1)+' / '+DATA.length;
  submitBtn.textContent='OK';
  ansEl.focus();
}

function check(){
  const d = DATA[idx];
  const typed = ansEl.value.trim().toLowerCase();

  if(typed === d.en){
    score++;
    fbEl.innerHTML = '<div class="heart">‚ù§</div>';
    hintEl.textContent = '';
    submitBtn.textContent = 'OK';
    safePlay(ding);
    setTimeout(next, 650);
  }else{
    anyWrongEver = true;
    mistakes++;
    fbEl.innerHTML = '<div class="fart">üí®</div>';
    submitBtn.textContent = '„ÇÇ„ÅÜ‰∏ÄÂõû';
    safePlay(fart);

    if(mistakes >= 3){
      hintEl.textContent = 'Hint: ' + d.en[0] + '...';
    }
  }
}

function next(){
  idx++;
  if(idx>=DATA.length) finish();
  else load();
}

function finish(){
  $('#game').style.display='none';
  $('#result').style.display='block';

  const pct=Math.round((score/DATA.length)*100);
  const s=$('#score');
  s.textContent=pct+'%';
  s.className='score '+(pct>=80?'good':pct>=50?'mid':'bad');

  const retry = $('#retryLink');
  if(retry) retry.href = window.location.pathname.split('/').pop() || '';

  // ‚úÖ Perfect run: no wrong answers ever
  if(!anyWrongEver){
    cardEl.classList.add('perfect');
    $('#perfectTag').style.display='block';
  }
}

submitBtn.addEventListener('click', check);
ansEl.addEventListener('keydown', (e)=>{ if(e.key==='Enter') check(); });

load();
</script>
</body>
</html>
